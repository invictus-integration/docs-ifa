"use strict";(self.webpackChunkinvictus_integration=self.webpackChunkinvictus_integration||[]).push([[4213],{4994:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/dfdiagnostics-192b9129ddb496e30e97655eefbce953.png"},7021:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"dashboard/flows/import-flow-traces/import-flow-via-df","title":"Enable DataFactory Diagnostics","description":"For the Invictus Dashboard to know if messages went through your DataFactory pipelines correctly or not, diagnostic settings need to be configured on all pipelines you want to include. These settings should stream their diagnostic traces to the Invictus EventHubs resource:","source":"@site/versioned_docs/version-v6.0.0/dashboard/flows/04_import-flow-traces/import-flow-via-df.md","sourceDirName":"dashboard/flows/04_import-flow-traces","slug":"/dashboard/flows/import-flow-traces/import-flow-via-df","permalink":"/dashboard/flows/import-flow-traces/import-flow-via-df","draft":false,"unlisted":false,"editUrl":"https://github.com/invictus-integration/docs-ifa/edit/master/docs/versioned_docs/version-v6.0.0/dashboard/flows/04_import-flow-traces/import-flow-via-df.md","tags":[],"version":"v6.0.0","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Import flow traces programmatically via HTTP","permalink":"/dashboard/flows/import-flow-traces/import-flow-prog-via-http"},"next":{"title":"Import flow traces via LogicApp workflows","permalink":"/dashboard/flows/import-flow-traces/import-flows-via-la"}}');var s=t(4848),i=t(8453);const r={},a="Enable DataFactory Diagnostics",c={},l=[];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"enable-datafactory-diagnostics",children:"Enable DataFactory Diagnostics"})}),"\n",(0,s.jsx)(n.p,{children:"For the Invictus Dashboard to know if messages went through your DataFactory pipelines correctly or not, diagnostic settings need to be configured on all pipelines you want to include. These settings should stream their diagnostic traces to the Invictus EventHubs resource:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"EventHubsNamespace"}),": ",(0,s.jsx)(n.code,{children:"invictus-{env}-we-sft-evnm"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"EventHubsName"}),": ",(0,s.jsx)(n.code,{children:"invictus-{env}-we-sft-df-evhb"})]}),"\n"]}),"\n",(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsx)(n.p,{children:"\u26a0\ufe0f Make sure that the following categories are checked:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"PipelineRuns"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"TriggerRuns"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"ActivityRuns"})]}),"\n"]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"DataFactory diagnostic settings",src:t(4994).A+"",width:"893",height:"765"})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/data-factory/monitor-configure-diagnostics",children:"Microsoft's documentation"})," on how this can be configured manually."]}),"\n",(0,s.jsx)(n.p,{children:"Alternatively, you can update your Bicep template to include them:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bicep",children:"resource factoryName_microsoft_insights_settingName 'Microsoft.DataFactory/factories/providers/diagnosticSettings@2017-05-01-preview' = {\n  name: '${factoryName}/microsoft.insights/${settingName}'\n  location: resourceGroup().location,\n  properties: {\n    workspaceId: null,\n    storageAccountId: null\n    eventHubAuthorizationRuleId: 'RootManageSharedAccessKey',\n    eventHubName: 'invictus-{env}-we-sft-df-evhb',\n    logs: [\n      {\n        category: 'PipelineRuns'\n        enabled: true,\n        retentionPolicy: {\n          enabled: false,\n          days: 0\n        }\n      }\n      {\n        category: 'TriggerRuns'\n        enabled: true,\n        retentionPolicy: {\n          enabled: false,\n          days: 0\n        }\n      }\n      {\n        category: 'ActivityRuns'\n        enabled: true,\n        retentionPolicy: {\n          enabled: false,\n          days: 0\n        }\n      }\n    ]\n  }\n  dependsOn: [\n    datafactory\n  ]\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(6540);const s={},i=o.createContext(s);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);