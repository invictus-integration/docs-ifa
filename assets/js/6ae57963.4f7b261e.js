"use strict";(self.webpackChunkinvictus_integration=self.webpackChunkinvictus_integration||[]).push([[851],{1373:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"framework/installation/framework-releasepipeline","title":"Framework Release Pipeline","description":"The release pipeline will use the artifacts created from the build pipeline and publish this to the stage(s) you define. Each stage will deploy the resources to the Azure subscription and resource group you specify in the deployment tasks.","source":"@site/versioned_docs/version-v6.0.0/framework/installation/framework-releasepipeline.md","sourceDirName":"framework/installation","slug":"/framework/installation/framework-releasepipeline","permalink":"/docs-ifa/framework/installation/framework-releasepipeline","draft":false,"unlisted":false,"editUrl":"https://github.com/invictus-integration/docs-ifa/edit/master/docs/versioned_docs/version-v6.0.0/framework/installation/framework-releasepipeline.md","tags":[],"version":"v6.0.0","frontMatter":{"sidebar_class_name":"hidden"},"sidebar":"sidebar","previous":{"title":"Framework Migration Guide","permalink":"/docs-ifa/framework/installation/framework-migration"},"next":{"title":"Deprecated Framework components","permalink":"/docs-ifa/framework/deprecated/"}}');var s=t(4848),i=t(8453);const c={sidebar_class_name:"hidden"},d="Framework Release Pipeline",l={},a=[{value:"Variable Group",id:"variable-group",level:2},{value:"YAML Pipeline",id:"yaml-pipeline",level:2},{value:"Deploy Script Arguments",id:"deploy-script-arguments",level:2},{value:"Bicep Template Parameters",id:"bicep-template-parameters",level:2},{value:"Top-level parameters",id:"top-level-parameters",level:2},{value:"Function App service parameters",id:"function-app-service-parameters",level:2},{value:"Storage parameters",id:"storage-parameters",level:2},{value:"Messaging parameters",id:"messaging-parameters",level:2},{value:"Secret parameters",id:"secret-parameters",level:2},{value:"Observability parameters",id:"observability-parameters",level:2},{value:"Scaling parameters",id:"scaling-parameters",level:2}];function o(e){const r={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"framework-release-pipeline",children:"Framework Release Pipeline"})}),"\n",(0,s.jsx)(r.p,{children:"The release pipeline will use the artifacts created from the build pipeline and publish this to the stage(s) you define. Each stage will deploy the resources to the Azure subscription and resource group you specify in the deployment tasks."}),"\n",(0,s.jsx)(r.h2,{id:"variable-group",children:"Variable Group"}),"\n",(0,s.jsxs)(r.p,{children:["Create a variable group named ",(0,s.jsx)(r.code,{children:"{prefix}.Invictus.{stage}"})," for all the stages (environments) and add at least one variable (eg: Invictus.Secrets.ApiKey1.Name = apikey1)."]}),"\n",(0,s.jsx)(r.p,{children:"Make sure the Project Collection Build Service has Administrator access to these variable groups (Pipelines > Library > Security)"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Library Security",src:t(4417).A+"",width:"790",height:"390"})}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"yaml-pipeline",children:"YAML Pipeline"}),"\n",(0,s.jsxs)(r.p,{children:["Next step is to add a YAML pipeline to release the Invictus for Azure Framework. Change the ",(0,s.jsx)(r.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(2515).A+"",children:"framework.release.yaml"})," file according to your needs, for example change the needed environments and change the name of the build pipeline trigger:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",children:"resources:\n  pipelines:\n    # Name of the pipeline resource inside this workflow. Used to reference the pipeline resources later on (e.g. download artifacts).\n  - pipeline: _build\n    # Name of the build pipeline in Azure Pipelines\n    source: 'customer.azure.invictus.framework.build' \n    trigger: true\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u26a0\ufe0f"," Make sure to replace the ",(0,s.jsx)(r.code,{children:"azureSubscription"})," value with the name of your serviceconnection as this value cannot be parameterized."]}),"\n",(0,s.jsx)(r.p,{children:"Also make sure to change the bicep template parameters according to your needs."}),"\n",(0,s.jsxs)(r.p,{children:["If you need to overwrite more bicep template parameters make sure to add this to the ",(0,s.jsx)(r.code,{children:"deployScriptParameters"}),". A complete list of bicep template parameters can be found ",(0,s.jsx)(r.a,{href:"#bicep-template-parameters",children:"here"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["Afterwards add the ",(0,s.jsx)(r.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(2515).A+"",children:"framework.release.yaml"})," in your DevOps environment as a pipeline."]}),"\n",(0,s.jsx)(r.h2,{id:"deploy-script-arguments",children:"Deploy Script Arguments"}),"\n",(0,s.jsx)(r.p,{children:"The following script arguments are used in the deploy script:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Mandatory Arguments"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"artifactsPath"}),": ",(0,s.jsx)(r.code,{children:"$(ArtifactsPath)"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"resourcePrefix"}),": ",(0,s.jsx)(r.code,{children:"$(Infra.Environment.ShortName)-$(Infra.Environment.Region.Primary.ShortName)-$(Infra.Environment.Customer.ShortName)"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"resourceGroupName"}),": name of the Azure Resource Group. Include the variable ",(0,s.jsx)(r.code,{children:"$(Infra.Environment.ShortName)"})," to make this environment specific."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"variableGroupName"}),": The name of the variable group. Include the variable ",(0,s.jsx)(r.code,{children:"$(Infra.Environment.ShortName)"})," to make this environment specific."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"identityProviderClientSecret"}),": Value can be obtained by following this guide: ",(0,s.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/app-service/configure-authentication-provider-aad",children:"Container Authentication"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"identityProviderApplicationId"}),": Value can be obtained by following this guide: ",(0,s.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/app-service/configure-authentication-provider-aad",children:"Container Authentication"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Optional Arguments"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"artifactsPathScripts"}),": uses ArtifactsPath when not specified."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"resourceGroupLocation"}),": ",(0,s.jsx)(r.code,{children:"$(Infra.Environment.Region.Primary)"})," or 'West Europe' when not specified."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"additionalTemplateParameters"}),": Additional named parameters for the Bicep template you wish to override. More on this below."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"AdditionalTemplateParameters"})," argument are named arguments you can use to override the default values used by the ARM template. You simply name the argument as the parameter. For example if you want to use a different servicePlanSku you would add ",(0,s.jsx)(r.code,{children:'-eventHubSkuName "Standard"'})," to the arguments of the powershell script."]}),"\n",(0,s.jsxs)(r.p,{children:["Complete example of the arguments (note the use of ",(0,s.jsx)(r.code,{children:"-devOpsObjectId"})," as an additional parameter):"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-powershell",children:'PS> $(ArtifactsPath)/Deploy.ps1 `\n-version ${{parameters.Version}} `\n-location "West Europe" `\n-useBeta ${{parameters.UseBeta}} `\n-acrPath "invictusreleases.azurecr.io" `\n-acrUsername $(Infra.Environment.ACRUsername) `\n-acrPassword $(Infra.Environment.ACRPassword) `\n-resourcePrefix $(Infra.Environment.ResourcePrefix) `\n-artifactsPath $(Pipeline.Workspace)/_build/framework `\n-resourceGroupName $(Infra.Environment.ResourceGroup) `\n-variableGroupName invictus.$(Infra.Environment.ShortName) `\n-devOpsObjectId "$(Infra.DevOps.Object.Id)" `\n-identityProviderApplicationId "$(Infra.AzAD.Client.IdentityProviderApplicationId)" `\n-identityProviderClientSecret "$(Infra.AzAD.Client.IdentityProviderClientSecret)" `\n-containerAppsEnvironmentLocation "$(Infra.Environment.ContainerAppsEnvironmentLocation)"\n'})}),"\n",(0,s.jsx)(r.h2,{id:"bicep-template-parameters",children:"Bicep Template Parameters"}),"\n",(0,s.jsx)(r.p,{children:"The below tables lists the parameters accepted by the Bicep template."}),"\n",(0,s.jsx)(r.h2,{id:"top-level-parameters",children:"Top-level parameters"}),"\n",(0,s.jsx)(r.p,{children:"Resource-independent parameters that affect all resources in the deployed resource group."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter"}),(0,s.jsx)(r.th,{style:{textAlign:"center"},children:"Required"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"resourcePrefix"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{}),(0,s.jsx)(r.td,{children:"used as part of the default names for most resources."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"devOpsObjectId"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{}),(0,s.jsx)(r.td,{children:"The object-id associated with the service principal of the enterprise application that's connected to the service connection on DevOps"})]})]})]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter"}),(0,s.jsx)(r.th,{style:{textAlign:"center"},children:"Required"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"enabledVnetSupport"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"false"})}),(0,s.jsx)(r.td,{children:"Used to toggle VNET functionality on or off"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"vnetResourceGroupName"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{children:"\xa0"}),(0,s.jsx)(r.td,{children:"The name of the resource group on Azure where the VNET is located"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"vnetName"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{children:"\xa0"}),(0,s.jsx)(r.td,{children:"The name of the VNET resource"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"privateEndpointSubnetName"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{}),(0,s.jsx)(r.td,{children:"The name of the subnet to be used to connect the private endpoint resources"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"containerAppEnvironmentSubnetName"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{}),(0,s.jsx)(r.td,{children:"The name of the subnet to be used to connect the container app environment"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"dnsZoneSubscriptionId"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:"Subscription ID of scope"}),(0,s.jsx)(r.td,{children:"The subscription ID of the private DNS zones."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"dnsZoneResourceGroupName"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:"VNET RG name"}),(0,s.jsx)(r.td,{children:"The resource group name of where the private DNS zones are located."})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"function-app-service-parameters",children:"Function App service parameters"}),"\n",(0,s.jsx)(r.p,{children:"Parameters related to the Azure Functions applications that are deployed."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter"}),(0,s.jsx)(r.th,{style:{textAlign:"center"},children:"Required"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"timesequencerFunctionName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-timesequencer"})}),(0,s.jsx)(r.td,{children:"Name for the time sequencer function"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"sequenceControllerFunctionName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-sequencecontroller"})}),(0,s.jsx)(r.td,{children:"Name for the Sequence Controller function"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"xmlJsonConverterFunctionName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-xmljsonconverter"})}),(0,s.jsx)(r.td,{children:"Name for the XmlJson Converter function"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"xsdValidatorFunctionName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-xsdvalidator"})}),(0,s.jsx)(r.td,{children:"Name for the XSD Validator function"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"regexTranslatorFunctionName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-regextranslator"})}),(0,s.jsx)(r.td,{children:"Name for the Regex Translator function"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"transcoV2FunctionName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-transco-v2"})}),(0,s.jsx)(r.td,{children:"Name for the TranscoV2 function"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"pubsubV2FunctionName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-pubsub-v2"})}),(0,s.jsx)(r.td,{children:"Name for the PubSubV2 function"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"exceptionHandlerFunctionName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-exceptionhandler"})}),(0,s.jsx)(r.td,{children:"Name for the Exception Handler function"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"servicePlanName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-appplan"})}),(0,s.jsx)(r.td,{children:"Name for the service plan which will host the APIs"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"storage-parameters",children:"Storage parameters"}),"\n",(0,s.jsx)(r.p,{children:"Parameters related to data that is stored during the component's interaction."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter"}),(0,s.jsx)(r.th,{style:{textAlign:"center"},children:"Required"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"storageAccountName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus{resourcePrefix}store"})}),(0,s.jsxs)(r.td,{children:["Name for the Azure Storage resource. Any dashes (-) will be removed from ",(0,s.jsx)(r.code,{children:"{resourcePrefix}"})]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"blobContainerPrefix"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus"})}),(0,s.jsx)(r.td,{children:"Prefix set for blob containers for pubsub"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"storageAccountType"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Standard_LRS"})}),(0,s.jsx)(r.td,{children:"The Storage account\xa0StorageAccountSkuType"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"storageAccountSubnets"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"[]"})}),(0,s.jsx)(r.td,{children:"An array of string. The values need to match the subnet names on the VNET"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"disableStorageAccountPublicNetworkAccess"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"false"})}),(0,s.jsx)(r.td,{children:"If true, the Invictus storage account will not be accessible from a public network."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"storageAccountMinimumTLSVersion"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"TLS1_2"})}),(0,s.jsxs)(r.td,{children:["Set the required TLS value for the storage account. Accepted values: ",(0,s.jsx)(r.code,{children:"TLS1_0"}),", ",(0,s.jsx)(r.code,{children:"TLS1_1"}),", ",(0,s.jsx)(r.code,{children:"TLS1_2"})]})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"messaging-parameters",children:"Messaging parameters"}),"\n",(0,s.jsx)(r.p,{children:"Parameters related to the messaging components, like PubSub."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter"}),(0,s.jsx)(r.th,{style:{textAlign:"center"},children:"Required"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"serviceBusNamespaceName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-sbs"})}),(0,s.jsx)(r.td,{children:"Name for the Service Bus Namespace resource"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"serviceBusSkuName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"Standard"})," or ",(0,s.jsx)(r.code,{children:"Premium"})," if VNET enabled`"]}),(0,s.jsx)(r.td,{children:"Name for the Service Bus SKU"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"serviceBusMessageTimeToLiveMinutes"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"-1"})}),(0,s.jsx)(r.td,{children:"Time messages should be stored on service bus before being archived"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"serviceBusSubnets"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"[]"})}),(0,s.jsx)(r.td,{children:"An array of string. The values need to match the subnet names on the VNET"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"secret-parameters",children:"Secret parameters"}),"\n",(0,s.jsx)(r.p,{children:"Parameters related to the security and secret management of the deployed applications."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter"}),(0,s.jsx)(r.th,{style:{textAlign:"center"},children:"Required"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"keyVaultName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-vlt"})}),(0,s.jsx)(r.td,{children:"Name for the Key Vault Service Namespace resource"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"keyVaultEnablePurgeProtection"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"null"})}),(0,s.jsx)(r.td,{children:"If true, enables key vault purge protection. Once enabled, this property can never be disabled."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"identityProviderClientSecret"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{}),(0,s.jsx)(r.td,{children:"AAD App Registration client secret required for Azure Container Apps Identity Provider authentication"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"identityProviderApplicationId"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{}),(0,s.jsx)(r.td,{children:"AAD Application ID for MSI Authentication of Azure Container Apps"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsxs)(r.strong,{children:[(0,s.jsx)(r.code,{children:"keyVaultSubnets"})," (VNET)"]})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"[]"})}),(0,s.jsx)(r.td,{children:"An array of string. The values need to match the subnet names on the VNET"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"observability-parameters",children:"Observability parameters"}),"\n",(0,s.jsx)(r.p,{children:"Parameters related to telemetry tracking of the deployed applications."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter"}),(0,s.jsx)(r.th,{style:{textAlign:"center"},children:"Required"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"appInsightsName"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"invictus-{resourcePrefix}-appins"})}),(0,s.jsx)(r.td,{children:"Name for the Application Insights resource"})]})})]}),"\n",(0,s.jsx)(r.h2,{id:"scaling-parameters",children:"Scaling parameters"}),"\n",(0,s.jsx)(r.p,{children:"Azure Container Apps allow for flexible scaling customization. In Invictus we have provided default scaling values which can be customized according to your scenario."}),"\n",(0,s.jsx)(r.p,{children:"Container Apps have the ability to scale down to zero replicas. This is a great cost-saving option especially for components which are not used at all. A container app scaled to zero will automatically scale out when triggered, however this may take up to a few minutes to complete. This could prove to be an issue in scenarios with limited timeout e.g. logic apps with 120 seconds timeout. In such cases there is no option but to set a minimum replica count of 1."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter"}),(0,s.jsx)(r.th,{style:{textAlign:"center"},children:"Required"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"timeSequencerScaling"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"exceptionHandlerScaling"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"pubSubV2Scaling"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"regexTranslatorScaling"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"sequenceControllerScaling"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"transcoV2Scaling"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"xmlJsonConverterScaling"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"xsdValidatorScaling"})}),(0,s.jsx)(r.td,{style:{textAlign:"center"},children:"No"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:"Each of the above parameters accepts an object:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:"{\n  scaleMinReplicas: int\n  scaleMaxReplicas: int\n  cpuResources: string\n  memoryResources: string\n}\n"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter value"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"scaleMinReplicas"})}),(0,s.jsx)(r.td,{children:"The lowest number of replicas the Container App will scale in to."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"scaleMaxReplicas"})}),(0,s.jsx)(r.td,{children:"The highest number of replicas the Container App will scale out to."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"cpuResources"})}),(0,s.jsxs)(r.td,{children:["The amount of cpu resources to dedicate for the container resource. ",(0,s.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/container-apps/containers#allocations",children:"See here for allowed values"}),"."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"memoryResources"})}),(0,s.jsxs)(r.td,{children:["The amount of memory resources to dedicate for the container resource. ",(0,s.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/container-apps/containers#allocations",children:"See here for allowed values"}),"."]})]})]})]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},2515:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/files/framework.release-d8eba55b0dd1a4f5e366d3d74bc1b570.yaml"},4417:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/ifa-library-security-abecb87b52b4c57428a377be276c1aa7.png"},8453:(e,r,t)=>{t.d(r,{R:()=>c,x:()=>d});var n=t(6540);const s={},i=n.createContext(s);function c(e){const r=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);