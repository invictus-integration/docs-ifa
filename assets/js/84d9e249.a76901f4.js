"use strict";(globalThis.webpackChunkinvictus_integration=globalThis.webpackChunkinvictus_integration||[]).push([[4213],{4994:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/dfdiagnostics-192b9129ddb496e30e97655eefbce953.png"},7021:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"dashboard/flows/import-flow-traces/import-flow-via-df","title":"Import flow traces via Azure Data Factory pipelines","description":"For the Invictus Dashboard to know if messages went through your Azure Data Factory pipelines correctly or not, diagnostic settings need to be configured on all pipelines you want to include. These settings should stream their diagnostic traces to the Invictus Event Hubs resource:","source":"@site/versioned_docs/version-v6.0.0/dashboard/flows/04_import-flow-traces/import-flow-via-df.md","sourceDirName":"dashboard/flows/04_import-flow-traces","slug":"/dashboard/flows/import-flow-traces/import-flow-via-df","permalink":"/dashboard/flows/import-flow-traces/import-flow-via-df","draft":false,"unlisted":false,"editUrl":"https://github.com/invictus-integration/docs-ifa/edit/master/docs/versioned_docs/version-v6.0.0/dashboard/flows/04_import-flow-traces/import-flow-via-df.md","tags":[],"version":"v6.0.0","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Import flow traces programmatically via HTTP","permalink":"/dashboard/flows/import-flow-traces/import-flow-prog-via-http"},"next":{"title":"Import flow traces via Azure Logic App workflows","permalink":"/dashboard/flows/import-flow-traces/import-flows-via-la"}}');var i=n(4848),s=n(8453);const r={},a="Import flow traces via Azure Data Factory pipelines",c={},l=[];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"import-flow-traces-via-azure-data-factory-pipelines",children:"Import flow traces via Azure Data Factory pipelines"})}),"\n",(0,i.jsx)(t.p,{children:"For the Invictus Dashboard to know if messages went through your Azure Data Factory pipelines correctly or not, diagnostic settings need to be configured on all pipelines you want to include. These settings should stream their diagnostic traces to the Invictus Event Hubs resource:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"EventHubsNamespace"}),": ",(0,i.jsx)(t.code,{children:"invictus-{env}-we-sft-evnm"})]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"EventHubsName"}),": ",(0,i.jsx)(t.code,{children:"invictus-{env}-we-sft-df-evhb"})]}),"\n"]}),"\n",(0,i.jsxs)(t.admonition,{type:"warning",children:[(0,i.jsx)(t.p,{children:"\u26a0\ufe0f Make sure that the following categories are checked:"}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\u2705 ",(0,i.jsx)(t.code,{children:"PipelineRuns"})]}),"\n",(0,i.jsxs)(t.li,{children:["\u2705 ",(0,i.jsx)(t.code,{children:"TriggerRuns"})]}),"\n",(0,i.jsxs)(t.li,{children:["\u2705 ",(0,i.jsx)(t.code,{children:"ActivityRuns"})]}),"\n"]})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Azure Data Factory diagnostic settings",src:n(4994).A+"",width:"893",height:"765"})}),"\n",(0,i.jsxs)(t.p,{children:["See ",(0,i.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/data-factory/monitor-configure-diagnostics",children:"Microsoft's documentation"})," on how this can be configured manually."]}),"\n",(0,i.jsx)(t.p,{children:"Alternatively, you can update your Bicep template to include them:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bicep",children:"resource factoryName_microsoft_insights_settingName 'Microsoft.DataFactory/factories/providers/diagnosticSettings@2017-05-01-preview' = {\n  name: '${factoryName}/microsoft.insights/${settingName}'\n  location: resourceGroup().location,\n  properties: {\n    workspaceId: null,\n    storageAccountId: null\n    eventHubAuthorizationRuleId: 'RootManageSharedAccessKey',\n    eventHubName: 'invictus-{env}-we-sft-df-evhb',\n    logs: [\n      {\n        category: 'PipelineRuns'\n        enabled: true,\n        retentionPolicy: {\n          enabled: false,\n          days: 0\n        }\n      }\n      {\n        category: 'TriggerRuns'\n        enabled: true,\n        retentionPolicy: {\n          enabled: false,\n          days: 0\n        }\n      }\n      {\n        category: 'ActivityRuns'\n        enabled: true,\n        retentionPolicy: {\n          enabled: false,\n          days: 0\n        }\n      }\n    ]\n  }\n  dependsOn: [\n    datafactory\n  ]\n}\n"})})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var o=n(6540);const i={},s=o.createContext(i);function r(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);